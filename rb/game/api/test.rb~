require 'sinatra'
require 'json'

get '/test_fragment1' do
  message_geo = Game::Database::MessageGeo.new
  message_geo.id = 1
  message_geo.fragment_index = 1
  message_geo.latitude = 43.291310
  message_geo.longitude = -2.863652
  message_geo.save

  message_geo = Game::Database::MessageGeo.new
  message_geo.id = 1
  message_geo.fragment_index = 2
  message_geo.latitude = 43.292074
  message_geo.longitude = -2.862922
  message_geo.save

  message_geo = Game::Database::MessageGeo.new
  message_geo.id = 1
  message_geo.fragment_index = 3
  message_geo.latitude = 43.291373
  message_geo.longitude = -2.861903
  message_geo.save

  "Mensaje creado"
end

get '/test_message' do
  message = Game::Database::Messages.new
  message.id = 1
  message.total_fragments = 3
  message.content = "Habia una vez un pinguino chiquitito :)"
  message.resource_link = "http://www.example.com"
  message.user_id = 1
  message.save
end

get '/test_list' do
  output = ""
  messages = message = Game::Database::Messages.all

  for message in messages
    output += message + "\n"
  end

  output
end
